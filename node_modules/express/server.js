{\rtf1\ansi\ansicpg1252\cocoartf2580
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fnil\fcharset0 HelveticaNeue;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;}
\margl1440\margr1440\vieww27720\viewh23120\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 const express = require('express');\
const \{ sign \} = require('jsonwebtoken');\
const crypto = require('crypto');\
\
const app = express();\
const port = 3000;\
\
// Replace these values with your actual Coinbase API key details\
const keyName = '
\f1\fs22 \cf2 organizations/ed176d77-4864-487e-a402-a9f4fc13e7d2/apiKeys/9d695fa7-185e-4bd7-9142-3b00e1b6baea
\f0\fs24 \cf0 ';\
const privateKey = `
\f1\fs22 \cf2 -----BEGIN EC PRIVATE KEY-----\\nMHcCAQEEIMPlS+v5lWX2PS/jt7L9Uu92LSCQLrfpnXJ+9o0osVXRoAoGCCqGSM49\\nAwEHoUQDQgAE1wZ3gVV22flC+vJSQSOeh1lHrDSzhHWarA+K5fMPJh2vXjRJQSoq\\nCLfzU96TAqKTgS9ttgQOp9vi6isIg2CViQ==\\n-----END EC PRIVATE KEY-----\\n
\f0\fs24 \cf0 `;\
\
app.get('/generate-jwt', (req, res) => \{\
  const method = req.query.method || 'GET';\
  const path = req.query.path || '/v2/accounts';\
\
  const iat = Math.floor(Date.now() / 1000);\
  const exp = iat + 120; // Token valid for 2 minutes\
  const nonce = crypto.randomBytes(16).toString('hex');\
  const uri = `$\{method\} api.coinbase.com$\{path\}`;\
\
  const payload = \{\
    iss: 'cdp',\
    nbf: iat,\
    exp: exp,\
    sub: keyName,\
    uri: uri,\
  \};\
\
  const token = sign(payload, privateKey, \{\
    algorithm: 'ES256',\
    header: \{\
      kid: keyName,\
      nonce: nonce,\
    \},\
  \});\
\
  res.json(\{ jwt: token \});\
\});\
\
app.listen(port, () => \{\
  console.log(`JWT generator server running at http://localhost:$\{port\}`);\
\});\
}